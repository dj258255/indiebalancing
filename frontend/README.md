# 인디밸런싱

인디게임 개발자를 위한 밸런스 데이터 관리 툴

## 왜 만들었나

개발자 커뮤니티(인디게임 갤러리, Game Dev 포럼 등)를 돌아다니며 밸런싱 관련 고충을 수집했습니다. 이 도구는 그 고충들을 해결하기 위해 만들어졌습니다.

---

## 개발자 고충 -> 해결 기능

### 1. "기준을 어떻게 잡아야 할지 모르겠음"

> "ATK 100이 센 건지 약한 건지 모르겠어요"
> "DPS 계산을 일일이 하기 귀찮음"
> "탱커는 뭐가 기준인지..."

**해결: 밸런스 검증기**

- DPS/EHP 자동 계산
- 역할별 기대치 제공 (탱커: EHP 180-250%, DPS: DPS 130-200%)
- 기준 대비 현재 유닛이 어디 위치하는지 시각화
- 1v1 시뮬레이션으로 밸런스 검증

### 2. "숫자가 왜 이 값인지 까먹음"

> "3개월 뒤에 보니까 왜 HP를 1500으로 잡았는지 모르겠음"
> "그냥 느낌으로 숫자 넣었는데 나중에 조정이 안 됨"

**해결: 육하원칙 기반 템플릿**

- 모든 값에 '근거' 컬럼 제공
- HP 1500 = BASE_HP(1000) * HP배율(1.5) 형태로 기록
- 수식으로 연결해서 기준값 변경 시 자동 반영
- 예: `HP배율`을 1.5→1.8로 바꾸면 관련 값 전부 재계산

### 3. "후반 벽 구간을 어디에 둬야 할지"

> "방치형 게임인데 언제쯤 벽을 만들어야 하나요?"
> "2일차에 막히면 이탈하는데, 적절한 난이도 곡선을 모르겠음"

**해결: 난이도 곡선 설계 도구**

- 플레이어 성장 vs 적 성장 곡선 시각화
- 벽 구간(Wall Stage) 배치 설계
- 마일스톤 배치 (보상 타이밍)
- 플레이타임 기준 도달 예상 일수 계산
- 프리셋 제공 (캐주얼/밸런스/하드코어)

### 4. "수식이 너무 많아서 뭐가 뭔지 모르겠음"

> "DPS 계산 공식이 뭐였지..."
> "EHP는 어떻게 계산하는 거야?"

**해결: 카테고리별 수식 도우미**

- 전투/밸런스: DAMAGE, DPS, EHP, TTK
- 경제/확률: COMPOUND, DIMINISH, EXPECTED
- 스테이지: SCALE, DIFFICULTY
- 유틸리티: IF, CLAMP, ROUND
- 시트 참조: REF
- 카테고리 필터링으로 빠른 검색
- 수식 테스트 기능 내장

### 5. "여러 시트 데이터를 연동하기 어려움"

> "캐릭터 시트랑 무기 시트를 연결하고 싶은데..."
> "글로벌 설정값을 여러 시트에서 참조하고 싶음"

**해결: 시트 간 참조 (REF 함수)**

```
=REF("글로벌설정", "BASE", "HP")
```

- 다른 시트의 특정 셀 참조 가능
- 글로벌 설정 시트를 만들어 기준값 중앙 관리
- 기준값 변경 시 모든 참조 시트 자동 업데이트

### 6. "작업하다 날린 적 있음"

> "브라우저 꺼졌는데 저장 안 해서 다 날림"

**해결: 자동 저장 & 백업**

- 30초마다 자동 저장
- 5분마다 백업 생성
- 내보내기/가져오기 지원
- 로컬 저장 (서버 불필요)

#### 내보내기/가져오기 형식

| 형식 | 내보내기 | 가져오기 | 설명 |
|------|:--------:|:--------:|------|
| **JSON** | O | O | 모든 프로젝트 · 수식 포함 · 완전 복원 가능 |
| **CSV** | O | X | 현재 시트만 · 계산된 값 · 엑셀 호환 |

> **제약사항**
> - CSV 내보내기: 현재 선택된 시트만 내보냄, 수식은 계산된 값으로 변환
> - CSV 가져오기: 추후 지원 예정
> - JSON 가져오기: 기존 데이터에 추가됨 (덮어쓰기 아님)

---

## 게임 특화 수식

일반 스프레드시트에는 없는, 게임 밸런싱 전용 함수들:

| 함수 | 설명 | 예시 |
|------|------|------|
| `DAMAGE(atk, def)` | 데미지 계산 | `=DAMAGE(100, 30)` |
| `DPS(atk, speed, crit, critDmg)` | 초당 데미지 | `=DPS(100, 1.5, 0.2, 1.5)` |
| `EHP(hp, def)` | 유효 체력 | `=EHP(1000, 50)` |
| `TTK(hp, dps)` | 처치 시간 | `=TTK(5000, 150)` |
| `SCALE(base, level, rate)` | 레벨 스케일링 | `=SCALE(100, 10, 1.1)` |
| `COMPOUND(base, rate, n)` | 복리 계산 | `=COMPOUND(100, 0.05, 10)` |
| `DIMINISH(value, soft, hard)` | 수확체감 | `=DIMINISH(150, 100, 200)` |

---

## 제공 템플릿

| 템플릿 | 용도 |
|--------|------|
| RPG 캐릭터 | HP, ATK, DEF, DPS, EHP 밸런싱 |
| 무기/장비 | 등급별 스탯 차이, 강화 수치 |
| 스킬/능력 | 데미지, 쿨타임, 마나 소모 |
| 몬스터 | 플레이어 대비 스케일링 |
| 스테이지 | 난이도 곡선, 보상 설계 |
| 재화 시스템 | Faucet/Sink 밸런스 |
| 가챠/확률 | 천장, 기대값, 손익분기 |
| 방치형 업그레이드 | 효율 곡선, 비용 증가율 |
| 밸런스 비교 | 유닛 간 DPS/EHP 비교 |
| 로그라이크 유물 | 시너지, 등급별 효과 |

---

## 설치 및 실행

```bash
# 의존성 설치
npm install

# 개발 서버 실행
npm run dev

# 빌드
npm run build
```

http://localhost:3000 에서 실행

---

## 기술 스택

- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- Zustand (상태 관리)
- Recharts (차트)
- LocalStorage (데이터 저장)

---

## 향후 추가 예정 기능

### AI 기반 테이블 자동 생성

자연어 또는 CLI 명령어로 테이블 구조와 수식을 자동 생성하는 기능

#### 자연어 입력 (AI)

```
"RPG 캐릭터 10레벨까지 성장 테이블 만들어줘.
HP는 100에서 시작해서 레벨당 1.15배씩 성장하고,
ATK는 10에서 시작해서 레벨당 +5씩 선형 성장"
```

#### CLI 명령어 입력

```bash
# 테이블 생성 명령어
/create table 캐릭터성장 --rows 10

# 열 추가 명령어
/add column Level type:number
/add column HP type:formula formula:"=SCALE(100, Level, 1.15, exponential)"
/add column ATK type:formula formula:"=10 + (Level * 5)"
/add column DEF type:formula formula:"=SCALE(5, Level, 1.1, linear)"

# 행 자동 생성
/generate rows 1-10 Level:auto

# 한 줄로 테이블 생성
/create table 몬스터 --cols "ID,이름,HP:=100*Level,ATK:=10*Level" --rows 20

# 템플릿 기반 생성
/create from-template rpg-character --rows 15 --base-hp 150 --growth 1.12
```

#### 기대 효과

- AI가 자연어를 분석해 적절한 열 구조 생성
- CLI로 빠른 반복 작업 및 자동화 가능
- 수식 자동 적용 (SCALE, COMPOUND, DAMAGE 등)
- 밸런싱 관련 조언 및 권장 수치 제안
- 스크립트 파일로 저장해 재사용 가능

### 추가 계획 중인 기능

- [ ] AI 테이블 자동 생성 (자연어)
- [ ] CLI 명령어 인터페이스
- [ ] CSV 가져오기 지원
- [ ] 시뮬레이션 결과 리포트 생성
- [ ] 팀 협업 (실시간 동기화)
- [ ] 버전 히스토리 관리
- [ ] 플러그인 시스템 (커스텀 수식 추가)

---

## 라이선스

MIT
